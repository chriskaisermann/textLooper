!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.TextLooper=t()}(this,function(e){"use strict";function t(e){var t,i={animations:[],delays:[],phrases:[]},o=-1,s=!1,r=!1,l=function(){var t=["webkit","moz","MS","o",""],o=e.getAttribute(n+"-separator")||",";if(s=e.hasAttribute(n+"-comeback")){var r=".textlooper--reverse{";t.forEach(function(e,t){var n=e?"-":"";r+=n+e+n+"animation-direction: alternate-reverse;"}),r+="}",m(r)}return i.phrases=e.textContent.split(o).map(function(e){return e.trim()}),i.delays=e.getAttribute(n).trim().split("|"),i.delays[0].length||(i.delays=[]),i.animations=e.getAttribute(n+"-animation"),i.animations=i.animations&&i.animations.length?i.animations.split("|"):[],["animation","delay"].forEach(function(e){var t=e+"s",n=i[t],o=i.phrases.length;if(n.length<o){var s=n.length?n[0]:a[e];i[t]=i[t].concat(new Array(o-n.length).fill(s))}}),i.animations.length!==i.phrases.length||i.delays.length!==i.phrases.length?void console.error("TextLooper - There are more phrases than parameters"):(t.forEach(function(t,n){e.addEventListener(t+(t.length?"AnimationEnd":"animationend"),d)}),e.classList.add("textlooper--looping"),void c())},d=function(){e.classList.remove("animated","textlooper--reverse",t),r=!r,s&&!r?c():setTimeout(c,i.delays[o])},c=function(){s&&r?e.classList.add("animated","textlooper--reverse",t):(++o===i.phrases.length&&(o=0),t=i.animations[o],e.style.visibility="hidden",e.textContent=i.phrases[o],setTimeout(function(){e.style.visibility="visible",e.classList.add("animated",t)},1))},m=function(e){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");t.querySelector("#textlooper-css")||(n.type="text/css",n.id="textlooper-css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n))};l()}var n="data-textloop",a={delay:1500,animation:"fadeIn"};return t.setDefaultDelay=function(e){a.delay=e},t.setDefaultAnimation=function(e){a.animation=e},t.refresh=function(){for(var e=0,a=document.querySelectorAll("["+n+"]:not(.textlooper--looping)");e<a.length;e++)new t(a[e])},t.refresh(),t});