!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.TextLooper=e()}(this,function(t){"use strict";function e(t,e){var i,u=-1,l=!1,c=this,d=function(t,e){if(c.node=t,c.attributes=b(e?Object.assign({ins:[],outs:null,comebackAsOut:!1,delays:[]},e):p()),c.attributes.comebackAsOut){var n=".textlooper--reverse{";a.forEach(function(t){var e=t?"-":"";n+=e+t+e+"animation-direction: alternate-reverse;"}),n+="}",r(n)}a.forEach(function(t,e){c.node.addEventListener(t+(t.length?"AnimationEnd":"animationend"),f)})},f=function(){c.node.classList.remove("animated","textlooper--reverse",i),l=!l;c.attributes.outs&&!l?h():setTimeout(h,c.attributes.delays[u])},h=function(){c.attributes.outs&&l?(i=c.attributes.outs[u],c.attributes.comebackAsOut&&c.node.classList.add("textlooper--reverse"),c.node.classList.add("animated",i)):(++u===c.attributes.phrases.length&&(u=0),i=c.attributes.ins[u],c.node.style.visibility="hidden",c.node.textContent=c.attributes.phrases[u],setTimeout(function(){c.node.style.visibility="visible",c.node.classList.add("animated",i)},0))},p=function(){var t={};if(t.separator=c.node.getAttribute(n("separator"))||s.separator,c.node.hasAttribute(n())||c.node.setAttribute(n(),s.delay),t.delays=c.node.getAttribute(n()),t.delays=o(t.delays.split("|")).filter(function(t){return Number.isInteger(+t)}).map(Number),t.phrases=o(c.node.textContent.split(t.separator)),!t.phrases.length)throw new Error("TextLooper: no text detected");return["in","out"].forEach(function(e){var r=e+"s",s=n(e);return c.node.hasAttribute(s)?(t[r]=c.node.getAttribute(s),void(t[r]=t[r]?o(t[r].split("|")):[])):void(t[r]=null)}),t},b=function(t){return t.separator=t.separator||s.separator,["in","out","delay"].forEach(function(e){var n,r=e+"s";if("out"!==e||t[r]){if(n=t[r]?Array.isArray(t[r])?t[r]:[t[r]]:[],n.length<t.phrases.length){var o=n.length?n[0]:s[e];n=n.concat(new Array(t.phrases.length-n.length).fill(o))}if(n.length!==t.phrases.length)throw new Error("TextLooper: There are a different number of phrases and parameters");t[r]=n}}),t.comebackAsOut||(t.comebackAsOut=!t.outs&&c.node.hasAttribute(n("comeback"))),t.comebackAsOut&&(t.outs=t.ins.slice(0)),t};this.start=function(){return this.node.classList.add(s.loopingClass),h(),c},this.getAttributes=function(){return this.attributes},d(t,e)}function n(t){return t=t||"",s.selector+(t.length?"-"+t:"")}function r(t){var e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");e.querySelector("#textlooper-css")||(n.type="text/css",n.id="textlooper-css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n))}function o(t){return t.filter(function(t){return t.trim().length})}var s={delay:1500,in:"fadeIn",out:"fadeOut",selector:"data-textlooper",loopingClass:"textlooper--looping",separator:","},a=["webkit","moz","MS","o",""];return e.setDefaults=function(t){Object.assign(s,t)},e.getDefaults=function(){return s},e.seek=function(){for(var t=0,r=document.querySelectorAll("["+n()+"]:not(."+s.loopingClass+")");t<r.length;t++)new e(r[t]).start()},e});