!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.TextLooper=t()}(this,function(e){"use strict";function t(e){var t,a={in:[],out:[],delay:[],phrase:[]},i=-1,r=!1,l=!1,s=function(){var t=["webkit","moz","MS","o",""],i=e.getAttribute(n+"-separator")||",";if(a.out=e.getAttribute(n+"-out"),r=!a.out&&e.hasAttribute(n+"-comeback")){var l=".textlooper--reverse{";t.forEach(function(e,t){var n=e?"-":"";l+=n+e+n+"animation-direction: alternate-reverse;"}),l+="}",d(l)}a.phrase=e.textContent.split(i).map(function(e){return e.trim()}),a.delay=e.getAttribute(n).trim().split("|"),a.delay[0].length||(a.delay=[]),["in","out"].forEach(function(t){a[t]=e.getAttribute(n+"-"+t),a[t]?a[t]=a[t].split("|"):""!==a[t]&&"in"!==t||(a[t]=[])}),["in","out","delay"].forEach(function(e){if("out"!==e||a[e]){var t=a[e];if(t.length<a.phrase.length){var n=t.length?t[0]:o[e];a[e]=a[e].concat(new Array(a.phrase.length-t.length).fill(n))}if(a[e].length!==a.phrase.length)throw"TextLooper - There are a different number of phrases and parameters"}}),t.forEach(function(t,n){e.addEventListener(t+(t.length?"AnimationEnd":"animationend"),c)}),e.classList.add("textlooper--looping"),u()},c=function(){e.classList.remove("animated","textlooper--reverse",t),l=!l,!a.out&&!r||l?setTimeout(u,a.delay[i]):u()},u=function(){r&&l?(console.log("comeback"),e.classList.add("animated","textlooper--reverse",t)):a.out&&l?(console.log("out"),t=a.out[i],e.classList.add("animated",t)):(console.log("in"),++i===a.phrase.length&&(i=0),t=a.in[i],e.style.visibility="hidden",e.textContent=a.phrase[i],setTimeout(function(){e.style.visibility="visible",e.classList.add("animated",t)},0))},d=function(e){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");t.querySelector("#textlooper-css")||(n.type="text/css",n.id="textlooper-css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n))};s()}var n="data-textloop",o={delay:1500,in:"fadeIn",out:"fadeOut"};return t.setDefaultDelay=function(e){o.delay=e},t.setDefaultAnimation=function(e){o.animation=e},t.refresh=function(){for(var e=0,o=document.querySelectorAll("["+n+"]:not(.textlooper--looping)");e<o.length;e++)new t(o[e])},t.refresh(),t});