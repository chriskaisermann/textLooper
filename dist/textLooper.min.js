!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.TextLooper=e()}(this,function(t){"use strict";function e(t,e){var a,u=-1,d=!1,c=this,f=function(t,e){if(c.node=t,c.attributes=m(e?Object.assign({ins:[],outs:null,comebackAsOut:!1,delays:[]},e):b()),console.log(c.attributes),c.attributes.comebackAsOut&&!l){var n="."+o.reverseClass+"{";i.forEach(function(t){var e=t?"-":"";n+=e+t+e+"animation-direction: alternate-reverse;"}),n+="}",s(n),l=!0}i.forEach(function(t,e){c.node.addEventListener(t+(t.length?"AnimationEnd":"animationend"),h)})},h=function(){c.node.classList.remove(o.animatedClass,o.reverseClass,a),d=!d;c.attributes.outs&&!d?p():setTimeout(p,c.attributes.delays[u])},p=function(){c.attributes.outs&&d?(a=c.attributes.outs[u],c.attributes.comebackAsOut&&c.node.classList.add(o.reverseClass),c.node.classList.add(o.animatedClass,a)):(++u===c.attributes.phrases.length&&(u=0),a=c.attributes.ins[u],c.node.style.visibility="hidden",c.node.textContent=c.attributes.phrases[u],setTimeout(function(){c.node.style.visibility="visible",c.node.classList.add(o.animatedClass,a)},0))},b=function(){var t={};if(t.separator=c.node.getAttribute(n("separator"))||o.separator,c.node.hasAttribute(n())||c.node.setAttribute(n(),o.delay),t.delays=c.node.getAttribute(n()),t.delays=r(t.delays.split("|")).filter(function(t){return Number.isInteger(+t)}).map(Number),t.phrases=r(c.node.textContent.split(t.separator)),!t.phrases.length)throw new Error("TextLooper - no text detected");return["in","out"].forEach(function(e){var s=e+"s",a=n(e);return c.node.hasAttribute(a)?(t[s]=c.node.getAttribute(a),void(t[s]=t[s]?r(t[s].split("|")):[])):void(t[s]=null)}),t},m=function(t){return t.separator=t.separator||o.separator,["in","out","delay"].forEach(function(e){var n,s=e+"s";if("out"!==e||t[s]){if(n=t[s]?Array.isArray(t[s])?t[s]:[t[s]]:[],n.length<t.phrases.length){var r=n.length?n[0]:o[e];n=n.concat(new Array(t.phrases.length-n.length).fill(r))}if(n.length!==t.phrases.length)throw new Error("TextLooper - There are a different number of phrases and parameters");t[s]=n}}),t.comebackAsOut||(t.comebackAsOut=!t.outs&&c.node.hasAttribute(n("comeback"))),t.comebackAsOut&&(t.outs=t.ins.slice(0)),t};this.start=function(){return this.node.classList.add(o.loopingClass),p(),c},this.getAttributes=function(){return this.attributes},f(t,e)}function n(t){return t=t||"",o.selector+(t.length?"-"+t:"")}function s(t){a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}function r(t){return t.filter(function(t){return t.trim().length})}var a,o={delay:1500,in:"fadeIn",out:"fadeOut",selector:"data-textlooper",separator:",",loopingClass:"textlooper--looping",reverseClass:"textlooper--reverse",animatedClass:"animated"},i=["webkit","moz","MS","o",""],u=document.head||document.getElementsByTagName("head")[0],l=!1;return e.setDefaults=function(t){Object.assign(o,t)},e.getDefaults=function(){return o},e.seek=function(){for(var t=0,s=document.querySelectorAll("["+n()+"]:not(."+o.loopingClass+")");t<s.length;t++)new e(s[t]).start()},function(){a=document.createElement("style"),a.type="text/css",a.id="textlooper-css",u.appendChild(a),s("["+n()+"]{display:inline-block;}")}(),e});